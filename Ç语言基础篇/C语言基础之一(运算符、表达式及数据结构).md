# C语言基础之一 #
---
运算符、表达式及数据类型
## 一、Linux平台下C语言编程基础 ##
&emsp;&emsp;[Linux](https://baike.baidu.com/item/linux/27050?fr=aladdin)是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和Unix的多用户、多任务、支持多线程和多CPU的操作系统。它能运行主要的Unix工具软件、应用程序和网络协议。它支持32位和64位硬件。Linux继承了Unix以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。Linux特点如下：
- Linux由众多微内核组成，其源代码完全开源；
- Linux继承了Unix的特性，具有非常强大的网络功能，其支持所有的因特网协议，包括TCP/IPv4、 TCP/IPv6和链路层拓扑程序等，且可以利用Unix的网络特性开发出新的协议栈；
- Linux系统工具链完整，简单操作就可以配置出合适的开发环境，可以简化开发过程，减少开发中仿真工具的障碍，使系统具有较强的移植性。

&emsp;&emsp;Linux作为嵌入式操作系统具有的优势，低成本开发系统Linux的源代码开放性允许任何人获取并修改Linux的源代码。一方面降低了开发的成本，另一方面又可以提高开发产品的效率。可应用于多种硬件平台Linux可支持X86、PowerPC、ARM、XSCALE、MIPS、SH、68K、Alpha、SPARC等多种体系结构，并且已经移植到多种硬件平台。这对于经费、时间受限制的研究与开发项目是很有吸引力的。Linux采用一个统一的框架对硬件进行管理，同时从一个硬件平台到另一个硬件平台的改动与上层应用无关。可定制的内核Linux具有独特的内核模块机制，它可以根据用户的需要，实时地将某些模块插入到内核中或者从内核中移走，并能根据嵌入式设备的个性需要量体裁衣。经过裁剪的Linux内核最小可达到150KB以下，并能根据嵌入式领域中资源受限的情况。性能优异Linux系统内核精简、高效和稳定，能够充分发挥硬件的功能，因此比其他操作系统的运行效率更高。在个人计算机上使用Linux，可以将它作为工作站。它也非常适合在嵌入式领域中应用，对比其他操作系统，它占用的资源更少，运行更稳定，速度更快。良好的网络支持Linux是首先实现TCP/IP协议栈的操作系统，它的内核结构在网络方面是非常完整的，并提供了对包括十兆位、百兆位及千兆位的以太网，还有无线网络、Token Ring（令牌环）和光纤甚至卫星的支持，这对现在依赖于网络的嵌入式设备来说无疑是很好的选择。Linux还有着嵌入式操作系统所需要的很多特色，突出的就是Linux适应于多种CPU和多种硬件平台而且性能稳定，裁剪性很好，开发和使用都很容易。同时，Linux内核的结构在网络方面是非常完整的，Linux对网络中最常用的 TCP/IP协议有最完备的支持。提供了包括十兆、百兆、千兆的以太网络，以及无线网络，Token Ring（令牌环网）、光纤甚至卫星的支持。
&emsp;&emsp;<font face=黑体>注:</font><sub><font size=2>本段文字来源于Web</font></sub>
### Linux与C语言的联系 ###
- Linux内核开发
- 基于Linux嵌入式开发
- Linux和C天生有不解之源，Linux的操作系统内核主要用C写的，另外Linux下的很多软件也是用C写的，特别一些著名的服务器软件MySQL,Apache等。
## 二、C语言数据类型 ##
### 1、数据类型 ###
&emsp;&emsp;C语言数据类型分为基本类型、构造类型、指针类型、空类型；基本类型又分为整形、字符型、实型、枚举型；构造类型又分为数组、结构体、共用体。关系如下图：
![C语言数据类型](------------------------------)
### 2、基本数据类型 ###
&emsp;&emsp;c语言有3种基本类型，第一种是“整型”。整型表示一个整数，通常包括“short”、“int”、“long”等。第二种是“实型”，“实型”即为浮点型数据，包括“float”、“double”等。“实型”通常用来表示实数，还可以用来表示整型不能表示的小数。第三种是“字符型”，“字符型”即为“char”型数据，通常用来表示各种字符。“字符型”与“ASCII”码一一对应。
### 3、常见数据类型的字长 ###
|          |              |                              |
| -------- | ------------ | ---------------------------- |
| 数据类型 | 长度（字节） | 值域                         |
| char     | 1            | -128~127或0~255（使用J编译） |
| signed char | 1 | -128~127 |
| unsigned char | 1 | 0~255 |
| short(signed short) | 2 | -32768~32767 |
| unsigned short | 2 | 0~65535 |
| int(signed int) | 4 | -2147483648~2147483647 |
| unsigned int | 4 | 0~4294967295 |
| float | 4 | 1.17549435e-38~3.402823466e+38(正数) |
| double | 8 | 2.225073858e-308~1.797693148e+308(正数) |
### 4、C语言常量 ###
- 整形常量
    - 常量是指在程序运行期间其数值不发生变化的数据。
    - 整型常量通常简称为整数。
   -  C语言的整数可以是十进制数、八进制数和十六进制数。
- 浮点常量(指数常量)
    - 浮点常量又称为实数，一般含有小数部分。
    - 在C语言中，实数只有十进制的实数，它又分为单精度实数和双精度实数，它们的表示方法基本相同。实数有   两种表示方法，即一般形式和指数形式。
    - 一般形式的实数基本形式为：&emsp;&emsp;(+/-)(M.N)，正号可省略不写，例如， 3.5 , -12.5,         3.1415926
    - 指数形式的实数一般是由尾数部分、字母e或E和指数部分组成。当一个实数的符号为正号时，可以省略不写，  其表示的一般形式如下：例如，1.176e+10 表示 1.176×10<sup>10</sup>、3.5789e-8 表示             -3.5789×10<sup>-8</sup>通常表示特别大或特别小的数。指数数据书写规范为，`(a)E(+/-M)`M为整数,a为非负数。
- 字符常量
    所谓字符常量是指一个单一字符，其表示形式是由两个单引号包括的一个字符。例如，‘A’, ‘a’, ‘Q’, ‘0’, ‘9’, ‘+’, ‘$’ 都是字符常量。在C语言中， 字符常量具有数值。字符常量的值就是该字符的ASCII码值。因此，可以这样说字符常量实际上是一字节的正整数。可将字符常量赋值给变量后进行运算，例如`char ex,ex1,ex2;ex1='A';ex2=1;ex=ex1+ex2;`则有`ex=B;`.
- 字符串及标识常量
    - 字符串常量是指用双引号括起来的一串字符来表示的数据。下面给出几个字符串常量的例子："Hello!", "StudentS"。
    - 注意字符串常量在内存上有`\0`结束标志位，故所占内存空间要在原本数据基础+1，以`"Hello!"`为例，它所占内存空间为6+1字节，汉字的个数远远超过255个，一个字节不满足编码需要，故需要两个字节16位二进制编码。
    - 所谓标识常量是指用标识符代替常量使用的一种常量, 其名称通常是一个标识符。
    标识常量也叫符号常量，为了不与一般变量的名称相混淆，标识常量的名称一般使用大写英文字母的标识符。标识常量在使用之前必须预先定义。标识常量的一般说明形式为：`#define <标识常量名称> <常量>`例如：`#define Max 10`意思是Max的值为10，在编程中应多使用宏定义方法，在程序Debug中会有很多方便之处。若常量部分过长，可以用`\`续行。
### 5、C语言变量 ###

- C语言的变量在程序中用变量名表示。变量名由用户根据其用途任意命名，变量名命名遵从标识符的起名规则(只能由字母\数字\下划线组成且头一个字母只能是字母或下划线. 变量不能是C的特殊字符)。
- 在程序运行时，变量占据一定大小的存储空间，其大小由其数据类型来决定的,作为某变量的内存空间的首地址，称为变量的地址。
- 变量在程序中使用时,必须预先说明它们的存储类型和数据类型。变量说明的一般形式是：
    - <存储类型> <数据类型 > <变量名> ；
    - <存储类型>可以是关键词`auto、register、static和extern`之一；
    - <数据类型>可以是前面讲的基本数据类型，也可以是后面要讲解的自定义的数据类型.
    - <变量名>是一个合法的标识符，其前面的32字符有效。 
    注意：在上面变量说明的式子里，<变量名>之后有一个分号“；”意味着它是一个语句，该语句我们通常称为变量的说明语句
- C语言支持四种存储类型：`auto, register, static和extern`。
    - 用auto存储类型说明的变量都是局部于某个程序范围内的，只能在某个程序范围内使用，通常在函数体内或函数中的复合语句里。
    - C语言中,在函数体的某程序段内说明auto存储类型的变量时可以省略关键字auto。例如，在函数体中，下列三条语句说明了三个auto存储类型的变量：
        ```
        auto int k ; //说明一个auto整型的k变量
        int j ; //省略了auto，说明一个auto整型的j变量
        double x; //省略了auto，说明一个auto双精度型的变量
        ```
     - `register`称为寄存器型，使用register关键词说明的变量主要目的是想将所说明的变量放入CPU的寄存器存储空间中，这样可以加快程序的运行速度。如申请不到就使用一般内存，同`auto` ,`register` 存储类型说明变量的方式如以下例子所示：
        ```
        register int count;         //说明一个存储类型为register的整数变量；
        ```
    - extern称为外部参照引用型，使用extern说明的变量是想引用在其它文件中函数体外部说明的变量。当变量在一个文件中的函数体外说明，所有其他文件中的函数或程序段都可引用这个变量，一般用于在函数之间传递数据。
    - static称为静态存储类型，在C语言中，既可以在函数体内，也可在函数体外说明static 存储类型的变量。在函数体内说明的static 存储类型的变量也是一种局部变量, 与auto最大不同点是:static存储类型的变量在内存中是以固定地址存放的，而不是以堆栈方式存放的；只要整个程序还在继续运行静态变量就不会随着说明它的程序段的结束而消失，它下次再调用该函数，该存储类型的变量不再重新说明，而且还保留上次调用存入的数值。
    - 变量初始化的一般形式：<存储类型> <数据类型> <变量> = <表达式> ，变量的初始化是指变量在被说明的同时赋给一个初值。例如：
        ```
        int i=0;
        static double w=100.56;
        double result = 1;
        double x = 5, y = x*2 ;
        register int count = 0 ;
        auto double s = 0.0 ;
        ```
### 6、强制数据类型转换 ###
- 强制数据类型的转换是指采用某种方式将某种数据类型强制转换成指定的数据类型。这种转换存在两种方式：一种为显式的数据类型转换，另一种为隐式的数据类型转换。
    - 显式的数据类型转换实现的一般形式为：（数据类型名称）< 表达式 >，例如：
        ```
        int a＝22, b=0 ;
        float c = 24.87, d= 3.3;
        b = (int) (a + c +d) ; // b存入右边表达式的计算 结果为50
        ```
    - 需要注意的是：
        - 强制类型转换符后面的表达式如存在复杂运算，就一定要用小括
号括起来
        - 强制类型转换符是一种不安全的转换，一般都是将高级类型转换
成低级类型，要丢失数据的精度；
        - 强制类型转换并不改变表达式中变量的数据类型和其值。
## 二、C语言运算符 ##
### 1、运算符及其运算 ###
- 表达式是指由运算符、运算量和标点符号组成的有效序列，其目的是用来说明一个计算过程。
- 表达式可以独立形成语句，该语句称为表达式语句。表达式语句的一般形式为：<表达式> ；
    - C语言提供的算术运算符有：`+,-,*,/,%,++,--`等，如下表：

    | | | |
    | -- | -- | -- |
    | 运算符 | 功能说明 | 举例 |
    | + | 加，单目运算符，取正 | a+b |
    | - | 减，单目运算符，取负 | a-b |
    | * | 乘法 | a*b |
    | / | 除法 | a/b |
    | % | 取余 | a%b |
    | ++ | 自增一 | a++ |
    | -- | 自减一 | a-- |
    - C语言的关系运算符结果为真，值为1，值假则为0。关系运算符如下：
    
      |        |          |      |
      | :-----: | :--------: | :----: |
      | 运算符 | 功能说明 | 举例 |
      | >      | 大于     | a>b  |
      | >=     | 大于等于 | a>=b |
      | <      | 小于     | a<b  |
      | <=     | 小于等于 | a<=b |
      | ==     | 等于     | a==b |
      | !=     | 不等于   | a!=b |
    - C语言逻辑运算符如下：

    | | | |
    | :-: | :-: | :-: |
    | 运算符 | 功能说明 | 举例 |
    | ！ | 逻辑反 | !(x==0) |
    | && | 逻辑与 | x>0 && x<100 |
    | \|\| | 逻辑或 |y<10 \|\|x<10|
    - C语言的位运算符如下：
    
      |        |            |      |
      | :----: | :--------: | :--: |
      | 运算符 |  功能说明  | 举例 |
      |   ~    |  位逻辑反  |  ~a  |
      |   &    |  位逻辑与  | a&b  |
      |   \|   |  位逻辑或  | a\|b |
      |   ^    | 位逻辑亦或 | a^b  |
      |   >>   |   右移位   | a<<1 |
      |   <<   |   左移位   | a>>2 |
    
    - C语言赋值复合运算符

        | | | |
        | :-: | :-: | :-: |
        | 运算符 | 功能说明 | 举例 |
        | += | 加赋值复合运算符  a+=b  等价于a=a+b | a+=b  等价于a=a+b |
        | -= | 减赋值复合运算符 | a-=b  等价于a=a-b |
        | *= | 乘法赋值复合运算符 | a*=b 等价于a=a\*b |
        | /= | 除法赋值复合运算符 | a/=b 等价于a=a/b |
        | %= | 求余赋值复合运算符 | a%=b 等价于a=a%b |
        | &= | 按位与赋值复合运算符 | a&=b 等价于a=a&b |
        | \|= | 按位或赋值复合运算符 | a\|=b 等价于a=a\|b |
        | ^= | 按位异或赋值复合运算符 | a^=b 等价于a=a^b |
        | \>>= | 按位右移赋值复合运算符 | a\>>=b 等价于a=a\>>b |
        | \<< | 按位左移赋值复合运算符 | a\<<=b 等价于a=a\<<b |
    - C语言的特殊运算符         
        - 条件运算符"? :" 条件运算符"? :"是一个三目运算符, 其运算的一般形式是:<表达式1> ? <表达式2> : <表达式3>，例如：
            ```C
            int x=82, y=101;
            x >= y ? x+18 : y-100 //运算结果为1
            x < (y-11) ? x-22 : y-1 //运算结果为60
            ```
            一个利用条件运算符代替if~else语句的例子。
            ```C
            int main(int argc,char **argv)
            { 
                int x, y=25;
                x=70; 
                y= x++ > 70 ? 100 : 0 ; 
                printf(“x=%d y=%d”, x, y);
                return 0;
            }
            //运行结果：
            //x=71 y=0
            ```
    - 逗号运算符
        - 逗号运算符是指在C语言中，多个表达式可以用逗号分开，其中用逗号分开的表达式的值分别结算，但整个表达式的值是最后一个表达式的值。
        - 逗号运算的结合性是从左至右，完毕之后整个表达式的值是最后一个表达式的值。例如`int a[2],x=2,y=5;``a[0]=(x+3,y++,x++);`那么最终结果是：`a[0]=2 x=3 y=6;`为何`a[0]=2`因为`(x++)`是运算之后再自加`a[1]=(x++,x+3,x+7);`那么最终结果是：`a[1]=10 ，x=3`
    - sizeof运算符
        
        - sizeof() 是一种内存容量度量函数，功能是返回一个变量或者类型的大小（以字节为单位）；在 C 语言中，sizeof() 是一个判断数据类型或者表达式长度的运算符。

### 2、运算符及优先级 ### 
- 在一个表达式中可能包含多个有不同运算符连接起来的、具有不同数据类型的数据对象；由于表达式有多种运算，不同的结合顺序可能得出不同结果甚至出现错误运算错误，因为当表达式中含多种运算时，必须按一定顺序进行结合，才能保证运算的合理性和结果的正确性、唯一性。优先级从上到下依次递减，最上面具有最高的优先级，逗号操作符具有最低的优先级。表达式的结合次序取决于表达式中各种运算符的优先级。优先级高的运算符先结合，优先级低的运算符后结合，同一行中的运算符的优先级相同。
- [运算符优先级]([https://baike.baidu.com/item/%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7/4752611](https://baike.baidu.com/item/运算符优先级/4752611)),在写程序中可以用括号改变优先级，不死板记忆优先级顺序。

